<ion-header [translucent]="true">
  <ion-toolbar>
    <div class="back-circle">
      <ion-img src="https://yokogawa.service-now.com/6749beaf1bbfe300b6351028bd4bcb1a.iix"></ion-img>
      <ion-title class="custom-font">IT Procurement</ion-title>
    </div>
    <ion-buttons slot="start">
      <ion-menu-button menu="main-menu"> </ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-card>
    <ion-card-content>
      <form [formGroup]="modificationForm">
        <div class="panel-group">
          <div class="panel panel-primary">
            <div class="panel-body">
              <div class="form-row">
                <div class="form-group col-md-4"
                  [ngClass]="{'invalid': formSubmitted && modificationForm.get('name')?.invalid}">
                  <label class="form-label required" for="name">Name</label>
                  <input type="text" class="form-control" id="name" formControlName="name" placeholder="Name"
                    required />
                </div>
                <div class="form-group col-md-4"
                  [ngClass]="{'invalid': formSubmitted && modificationForm.get('department')?.invalid}">
                  <label for="department">Department</label>
                  <select class="form-control" formControlName="department">
                    <option value="">Choose...</option>
                    <option value="IT">IT</option>
                    <option value="HR">HR</option>
                    <option value="Finance">Finance</option>
                  </select>
                </div>
                <div class="form-group col-md-4"
                  [ngClass]="{'invalid': formSubmitted && modificationForm.get('isExpenditure')?.invalid}">
                  <label for="isExpenditure">Is Expenditure</label>
                  <select class="form-control" formControlName="isExpenditure" required>
                    <option value="">Choose...</option>
                    <option value="Yes">Yes</option>
                    <option value="No">No</option>
                  </select>
                </div>
                <div *ngIf="modificationForm.get('isExpenditure')?.value === 'Yes'">
                  <div class="form-group col-md-6">
                    <label for="totalBudget">Total Budget</label>
                    <input type="number" class="form-control" formControlName="totalBudget"
                      placeholder="Total Budget" />
                  </div>
                  <div class="form-group col-md-6"
                    [ngClass]="{'invalid': formSubmitted && modificationForm.get('utilizedBudget')?.invalid}">
                    <label for="utilizedBudget">Utilized Budget</label>
                    <input type="number" class="form-control" formControlName="utilizedBudget"
                      placeholder="Utilized Budget" />
                  </div>
                </div>
                <div class="form-group col-md-6">
                  <label for="attachment">Attachment</label>
                  <input type="file" class="form-control" formControlName="attachment" />
                </div>
                <div class="form-group col-md-6">
                  <label for="remarks">Remarks</label>
                  <textarea class="form-control" formControlName="remarks" rows="1"></textarea>
                </div>
                <div class="inline-table">
                  <table class="table table-bordered">
                    <thead class="text text-primary">
                      <tr>
                        <th>Category</th>
                        <th>Item</th>
                        <th>Cost Center</th>
                        <th>Quantity</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody formArrayName="rows">
                      <tr *ngFor="let row of rows.controls; let i = index" [formGroupName]="i"
                        [ngClass]="{'invalid': formSubmitted && row.invalid}">
                        <td>
                          <select formControlName="category" class="form-control"
                            [ngClass]="{'invalid-inline': formSubmitted && row.get('category')?.invalid}">
                            <option value="">Choose...</option>
                            <option value="Hardware">Hardware</option>
                            <option value="Software">Software</option>

                          </select>
                        </td>
                        <td>
                          <select formControlName="item" class="form-control">
                          </select>
                        </td>
                        <td>
                          <select formControlName="costCenter" class="form-control">

                          </select>
                        </td>
                        <td>
                          <input type="number" formControlName="quantity" class="form-control" value="1">
                        </td>
                        <td>
                          <ion-button (click)="deleteRow(i)" color="danger" fill="solid" size="small">
                            <ion-icon name="trash-outline"></ion-icon>
                          </ion-button>
                        </td>
                      </tr>
                    </tbody>
                    <tfoot>
                      <tr>
                        <td colspan="7">
                          <ion-button (click)="addRow()" color="success" fill="solid" size="small">
                            <ion-icon name="add-circle-outline"></ion-icon>
                          </ion-button>
                        </td>
                      </tr>
                    </tfoot>
                  </table>
                </div>
              </div>
              <button class="btn btn-info" type="submit">Submit</button>
            </div>
          </div>
        </div>
      </form>
    </ion-card-content>

  </ion-card>
</ion-content>