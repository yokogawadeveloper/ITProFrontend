<ion-header>
  <ion-toolbar>
    <div class="back-circle">
      <ion-img src="https://yokogawa.service-now.com/6749beaf1bbfe300b6351028bd4bcb1a.iix"></ion-img>
      <ion-title class="custom-font">IT Procurement</ion-title>
    </div>
    <ion-buttons slot="start">
      <ion-menu-button menu="main-menu"> </ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen="true">
  <ion-card class="card">

    <ion-card-header>
      <ion-searchbar [(ngModel)]="statusFilter" (ionChange)="filterItems()" placeholder="Filter By Name & Status"></ion-searchbar>
    </ion-card-header>

    <ion-card-content>
      <div class="table-responsive">
        <table class="table">
          <thead class="thead-light">
            <tr class="sorting">
              <th scope="col" (click)="sortColumn = 'SI No'; toggleSortDirection('SI No')"
                [ngClass]="{'ascending': sortColumn === 'SI No' && sortDirection === 'asc', 'descending': sortColumn === 'SI No' && sortDirection === 'desc'}">
                SI No
                <ion-icon name="arrow-up-outline" *ngIf="sortColumn === 'SI No' && sortDirection === 'asc'"></ion-icon>
                <ion-icon name="arrow-down-outline" *ngIf="sortColumn === 'SI No' && sortDirection === 'desc'"></ion-icon>
              </th>
              <th scope="col" (click)="sortColumn = 'Request No'; toggleSortDirection('Request No')">
                Request No
                <ion-icon name="arrow-up-outline"
                  *ngIf="sortColumn === 'Request No' && sortDirection === 'asc'"></ion-icon>
                <ion-icon name="arrow-down-outline"
                  *ngIf="sortColumn === 'Request No' && sortDirection === 'desc'"></ion-icon>
              </th>

              <th scope="col" (click)="sortColumn = 'RequestType'; toggleSortDirection('RequestType')">
                Request Type
                <ion-icon name="arrow-up-outline"
                  *ngIf="sortColumn === 'RequestType' && sortDirection === 'asc'"></ion-icon>
                <ion-icon name="arrow-down-outline"
                  *ngIf="sortColumn === 'RequestType' && sortDirection === 'desc'"></ion-icon>
              </th>

              <th scope="col" (click)="sortColumn = 'Name'; toggleSortDirection('Name')">Name
                <ion-icon name="arrow-up-outline" *ngIf="sortColumn === 'Name' && sortDirection === 'asc'"></ion-icon>
                <ion-icon name="arrow-down-outline"
                  *ngIf="sortColumn === 'Name' && sortDirection === 'desc'"></ion-icon>

              </th>

              <th scope="col" (click)="sortColumn = 'Status'; toggleSortDirection('Status')">Status
                <ion-icon name="arrow-up-outline" *ngIf="sortColumn === 'Status' && sortDirection === 'asc'"></ion-icon>
                <ion-icon name="arrow-down-outline"
                  *ngIf="sortColumn === 'Status' && sortDirection === 'desc'"></ion-icon>
              </th>

              <!-- <th scope="col" (click)="sortColumn = 'Request No'; toggleSortDirection()">Request No
                <ion-icon name="arrow-up-outline"
                  *ngIf="sortColumn === 'Request No' && sortDirection === 'asc'"></ion-icon>
                <ion-icon name="arrow-down-outline"
                  *ngIf="sortColumn === 'Request No' && sortDirection === 'desc'"></ion-icon>
              </th>
              <th scope="col" (click)="sortColumn = 'RequestType'; toggleSortDirection()">Request Type
                <ion-icon name="arrow-up-outline"
                  *ngIf="sortColumn === 'RequestType' && sortDirection === 'asc'"></ion-icon>
                <ion-icon name="arrow-down-outline"
                  *ngIf="sortColumn === 'RequestType' && sortDirection === 'desc'"></ion-icon>
              </th>
              <th scope="col" (click)="sortColumn = 'Name'; toggleSortDirection()">Name
                <ion-icon name="arrow-up-outline" *ngIf="sortColumn === 'Name' && sortDirection === 'asc'"></ion-icon>
                <ion-icon name="arrow-down-outline"
                  *ngIf="sortColumn === 'Name' && sortDirection === 'desc'"></ion-icon>
              </th>
              <th scope="col" (click)="sortColumn = 'Status'; toggleSortDirection()">Status
                <ion-icon name="arrow-up-outline" *ngIf="sortColumn === 'Status' && sortDirection === 'asc'"></ion-icon>
                <ion-icon name="arrow-down-outline"
                  *ngIf="sortColumn === 'Status' && sortDirection === 'desc'"></ion-icon>
              </th> -->
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let data of getPageItems(); let i = index">
              <td scope="col" data-title="SI No">{{ (currentPage - 1) * itemsPerPage + i + 1 }}</td>
              <td scope="col" data-title="Request No">{{ data.RequestNumber }}</td>
              <td scope="col" data-title="RequestType">{{ data.RequestType }}</td>
              <td scope="col" data-title="Name">{{ data.Name }}</td>
              <td scope="col" data-title="Status">{{ data.Status }}</td>
              <td scope="col" data-title="Action">
                <ion-button (click)="redirectToProcurementDetails(data.id)" class="edit" color="tertiary" fill="clear"
                  size="small">
                  <ion-icon name="eye-off-outline"></ion-icon>
                </ion-button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </ion-card-content>

    <div class="pagination-controls">

      <div class="pagination-buttons">
        <ion-button (click)="goToPreviousPage()" [disabled]="currentPage === 1" class="pagination-button" fill="clear">
          <ion-icon name="arrow-back-circle"></ion-icon>
        </ion-button>

        <div class="pagination-info">
          Page {{ currentPage }} of {{ totalPages }}
        </div>

        <ion-button (click)="goToNextPage()" [disabled]="currentPage === totalPages" class="pagination-button"
          fill="clear">
          <ion-icon name="arrow-forward-circle"></ion-icon>
        </ion-button>
      </div>
    </div>

  </ion-card>
</ion-content>